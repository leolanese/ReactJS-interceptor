{"version":3,"file":"preact-ce.js","sources":["../src/index.js"],"sourcesContent":["import { h, render } from 'preact';\n\nconst Empty = () => null;\n\nvar _createClass = (function() {\n\tfunction defineProperties(target, props) {\n\t\tfor (var i = 0; i < props.length; i++) {\n\t\t\tvar descriptor = props[i];\n\t\t\tdescriptor.enumerable = descriptor.enumerable || false;\n\t\t\tdescriptor.configurable = true;\n\t\t\tif ('value' in descriptor) descriptor.writable = true;\n\t\t\tObject.defineProperty(target, descriptor.key, descriptor);\n\t\t}\n\t}\n\treturn function(Constructor, protoProps, staticProps) {\n\t\tif (protoProps) defineProperties(Constructor.prototype, protoProps);\n\t\tif (staticProps) defineProperties(Constructor, staticProps);\n\t\treturn Constructor;\n\t};\n})();\nfunction _classCallCheck(instance, Constructor) {\n\tif (!(instance instanceof Constructor)) {\n\t\tthrow new TypeError('Cannot call a class as a function');\n\t}\n}\nfunction _possibleConstructorReturn(self, call) {\n\tif (!self) {\n\t\tthrow new ReferenceError(\n\t\t\t\"this hasn't been initialised - super() hasn't been called\"\n\t\t);\n\t}\n\treturn call && (typeof call === 'object' || typeof call === 'function')\n\t\t? call\n\t\t: self;\n}\nfunction _inherits(subClass, superClass) {\n\tif (typeof superClass !== 'function' && superClass !== null) {\n\t\tthrow new TypeError(\n\t\t\t'Super expression must either be null or a function, not ' +\n\t\t\t\ttypeof superClass\n\t\t);\n\t}\n\tsubClass.prototype = Object.create(superClass && superClass.prototype, {\n\t\tconstructor: {\n\t\t\tvalue: subClass,\n\t\t\tenumerable: false,\n\t\t\twritable: true,\n\t\t\tconfigurable: true\n\t\t}\n\t});\n\tif (superClass)\n\t\tObject.setPrototypeOf\n\t\t\t? Object.setPrototypeOf(subClass, superClass)\n\t\t\t: (subClass.__proto__ = superClass);\n}\n\nexport default function register(Component, tagName, propNames) {\n\tlet klass = (function(_HTMLElement) {\n\t\t_inherits(klass, _HTMLElement);\n\n\t\tfunction klass() {\n\t\t\t_classCallCheck(this, klass);\n\n\t\t\tvar _this = Reflect.construct(HTMLElement, [], klass);\n\n\t\t\t_this._vdomComponent = Component;\n\t\t\treturn _this;\n\t\t}\n\n\t\t_createClass(\n\t\t\tklass,\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\tkey: 'connectedCallback',\n\t\t\t\t\tvalue: function connectedCallback() {\n\t\t\t\t\t\trenderElement.apply(this);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tkey: 'attributeChangedCallback',\n\t\t\t\t\tvalue: function attributeChangedCallback() {\n\t\t\t\t\t\trenderElement.apply(this);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tkey: 'detachedCallback',\n\t\t\t\t\tvalue: function detachedCallback() {\n\t\t\t\t\t\tunRenderElement.apply(this);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t],\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\tkey: 'observedAttributes',\n\t\t\t\t\tget: function() {\n\t\t\t\t\t\treturn propNames;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t);\n\n\t\treturn klass;\n\t})(HTMLElement);\n\treturn window.customElements.define(\n\t\ttagName || Component.displayName || Component.name,\n\t\tklass\n\t);\n}\n\nfunction renderElement() {\n\tthis._root = render(toVdom(this, this._vdomComponent), this, this._root);\n}\n\nfunction unRenderElement() {\n\trender(h(Empty), this, this._root);\n}\n\nfunction toVdom(element, nodeName) {\n\tif (element.nodeType === 3) return element.nodeValue;\n\tif (element.nodeType !== 1) return null;\n\tlet children = [],\n\t\tprops = {},\n\t\ti = 0,\n\t\ta = element.attributes,\n\t\tcn = element.childNodes;\n\tfor (i = a.length; i--; ) props[a[i].name] = a[i].value;\n\tfor (i = cn.length; i--; ) children[i] = toVdom(cn[i]);\n\treturn h(nodeName || element.nodeName.toLowerCase(), props, children);\n}\n"],"names":["const","Empty","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","Constructor","protoProps","staticProps","prototype","_classCallCheck","instance","TypeError","_inherits","subClass","superClass","create","constructor","value","setPrototypeOf","__proto__","register","Component","tagName","propNames","klass","_HTMLElement","_this","Reflect","construct","HTMLElement","_vdomComponent","connectedCallback","renderElement","apply","attributeChangedCallback","detachedCallback","unRenderElement","get","window","customElements","define","displayName","name","_root","render","toVdom","h","element","nodeName","nodeType","nodeValue","children","a","attributes","cn","childNodes","toLowerCase"],"mappings":"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"}